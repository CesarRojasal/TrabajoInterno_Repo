apiVersion: apps/v1
kind: Deployment
metadata:
 name: mongodb-deploy
 labels: 
  name: mongodb-deploy
  app: microservice
spec:
 replicas: 1
 selector: 
  matchLabels:
   app: microservice-api-imagen
   name : mongodb-pod
 template:
  metadata:
   name: mongodb-pod
   labels:
    app: microservice-api-imagen
    name : mongodb-pod
  spec:
   containers:
   - name: mongo-trabajointerno
     image: mongo:latest
     command:
       - /bin/bash
       - -c
     volumeMounts:
      - name: "mongo-data-dir"
        mountPath: "/data/db"
     env:
      - name: MONGO_INITDB_ROOT_USERNAME
        valueFrom:
          secretKeyRef:
            name: mongo-creds
            key: cesar
      - name: MONGO_INITDB_ROOT_PASSWORD
        valueFrom:
          secretKeyRef:
            name: mongo-creds
            key: pass
     ports:
     - containerPort: 27017